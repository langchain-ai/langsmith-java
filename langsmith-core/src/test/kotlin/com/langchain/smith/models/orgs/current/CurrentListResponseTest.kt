// File generated from our OpenAPI spec by Stainless.

package com.langchain.smith.models.orgs.current

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.langchain.smith.core.jsonMapper
import com.langchain.smith.models.orgs.PaymentPlanTier
import java.time.OffsetDateTime
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class CurrentListResponseTest {

    @Test
    fun create() {
        val currentListResponse =
            CurrentListResponse.builder()
                .config(
                    OrganizationConfig.builder()
                        .allowCustomIframes(true)
                        .arbitraryCostTrackingEnabled(true)
                        .canAddSeats(true)
                        .canDisablePublicSharing(true)
                        .canServeDatasets(true)
                        .canUseAbac(true)
                        .canUseAgentBuilder(true)
                        .canUseBulkExport(true)
                        .canUseLanggraphCloud(true)
                        .canUseRbac(true)
                        .canUseSamlSso(true)
                        .clioEnabled(true)
                        .datadogRumSessionSampleRate(0L)
                        .demoLgpNewGraphEnabled(true)
                        .enableAlignEvaluators(true)
                        .enableIncludeExtendedStats(true)
                        .enableLanggraphPricing(true)
                        .enableLgpListenersPage(true)
                        .enableMarkdownInTracing(true)
                        .enableMonthlyUsageCharts(true)
                        .enableOrgUsageCharts(true)
                        .enablePricingRedesign(true)
                        .enableQueryingV2Endpoints(true)
                        .enableRunTreeStreaming(true)
                        .enableThreadViewPlayground(true)
                        .enableThreadsImprovements(true)
                        .kvDatasetMessageSupport(true)
                        .langgraphDeployOwnCloudEnabled(true)
                        .langgraphEnterpriseEnabled(true)
                        .langgraphRemoteReconcilerEnabled(true)
                        .langsmithAlertsLegacyPocEnabled(true)
                        .langsmithAlertsPocEnabled(true)
                        .langsmithExperimentalSearchEnabled(true)
                        .lgpTemplatesEnabled(true)
                        .maxFreeLanggraphCloudDeployments(0L)
                        .maxIdentities(0L)
                        .maxLanggraphCloudDeployments(0L)
                        .maxPromptWebhooks(0L)
                        .maxThreadEvaluatorsPerTenant(0L)
                        .maxWorkspaces(0L)
                        .newRuleEvaluatorCreationVersion(0L)
                        .partnerPlanApprovalDate("partner_plan_approval_date")
                        .playgroundEvaluatorStrategy("playground_evaluator_strategy")
                        .premierPlanApprovalDate("premier_plan_approval_date")
                        .promptOptimizationJobsEnabled(true)
                        .requireCodeEvaluatorLanguageField(true)
                        .showPlaygroundPromptCanvas(true)
                        .showUpdatedResourceTags(true)
                        .showUpdatedSidenav(true)
                        .startupPlanApprovalDate("startup_plan_approval_date")
                        .tenantSkipTopkFacets(true)
                        .threadEvaluatorsEnabled(true)
                        .useExactSearchForPrompts(true)
                        .usePythonPlaygroundService(true)
                        .build()
                )
                .connectedToMetronome(true)
                .connectedToStripe(true)
                .hasCancelled(true)
                .isPersonal(true)
                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .currentPlan(
                    CustomerVisiblePlanInfo.builder()
                        .startedOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .tier(PaymentPlanTier.NO_PLAN)
                        .endsOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .build()
                )
                .defaultSsoProvision(true)
                .displayName("display_name")
                .endOfBillingPeriod(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .marketplacePayoutsEnabled(true)
                .paymentMethod(
                    StripePaymentMethodInfo.builder()
                        .brand("brand")
                        .email("email")
                        .expMonth(0L)
                        .expYear(0L)
                        .last4("last4")
                        .build()
                )
                .addPermission("string")
                .reachedMaxWorkspaces(true)
                .tier(PaymentPlanTier.NO_PLAN)
                .upcomingPlan(
                    CustomerVisiblePlanInfo.builder()
                        .startedOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .tier(PaymentPlanTier.NO_PLAN)
                        .endsOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .build()
                )
                .wallet(Wallet.builder().creditBalanceMicros(0L).inflightBalanceMicros(0L).build())
                .build()

        assertThat(currentListResponse.config())
            .isEqualTo(
                OrganizationConfig.builder()
                    .allowCustomIframes(true)
                    .arbitraryCostTrackingEnabled(true)
                    .canAddSeats(true)
                    .canDisablePublicSharing(true)
                    .canServeDatasets(true)
                    .canUseAbac(true)
                    .canUseAgentBuilder(true)
                    .canUseBulkExport(true)
                    .canUseLanggraphCloud(true)
                    .canUseRbac(true)
                    .canUseSamlSso(true)
                    .clioEnabled(true)
                    .datadogRumSessionSampleRate(0L)
                    .demoLgpNewGraphEnabled(true)
                    .enableAlignEvaluators(true)
                    .enableIncludeExtendedStats(true)
                    .enableLanggraphPricing(true)
                    .enableLgpListenersPage(true)
                    .enableMarkdownInTracing(true)
                    .enableMonthlyUsageCharts(true)
                    .enableOrgUsageCharts(true)
                    .enablePricingRedesign(true)
                    .enableQueryingV2Endpoints(true)
                    .enableRunTreeStreaming(true)
                    .enableThreadViewPlayground(true)
                    .enableThreadsImprovements(true)
                    .kvDatasetMessageSupport(true)
                    .langgraphDeployOwnCloudEnabled(true)
                    .langgraphEnterpriseEnabled(true)
                    .langgraphRemoteReconcilerEnabled(true)
                    .langsmithAlertsLegacyPocEnabled(true)
                    .langsmithAlertsPocEnabled(true)
                    .langsmithExperimentalSearchEnabled(true)
                    .lgpTemplatesEnabled(true)
                    .maxFreeLanggraphCloudDeployments(0L)
                    .maxIdentities(0L)
                    .maxLanggraphCloudDeployments(0L)
                    .maxPromptWebhooks(0L)
                    .maxThreadEvaluatorsPerTenant(0L)
                    .maxWorkspaces(0L)
                    .newRuleEvaluatorCreationVersion(0L)
                    .partnerPlanApprovalDate("partner_plan_approval_date")
                    .playgroundEvaluatorStrategy("playground_evaluator_strategy")
                    .premierPlanApprovalDate("premier_plan_approval_date")
                    .promptOptimizationJobsEnabled(true)
                    .requireCodeEvaluatorLanguageField(true)
                    .showPlaygroundPromptCanvas(true)
                    .showUpdatedResourceTags(true)
                    .showUpdatedSidenav(true)
                    .startupPlanApprovalDate("startup_plan_approval_date")
                    .tenantSkipTopkFacets(true)
                    .threadEvaluatorsEnabled(true)
                    .useExactSearchForPrompts(true)
                    .usePythonPlaygroundService(true)
                    .build()
            )
        assertThat(currentListResponse.connectedToMetronome()).isEqualTo(true)
        assertThat(currentListResponse.connectedToStripe()).isEqualTo(true)
        assertThat(currentListResponse.hasCancelled()).isEqualTo(true)
        assertThat(currentListResponse.isPersonal()).isEqualTo(true)
        assertThat(currentListResponse.id()).contains("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(currentListResponse.currentPlan())
            .contains(
                CustomerVisiblePlanInfo.builder()
                    .startedOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .tier(PaymentPlanTier.NO_PLAN)
                    .endsOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .build()
            )
        assertThat(currentListResponse.defaultSsoProvision()).contains(true)
        assertThat(currentListResponse.displayName()).contains("display_name")
        assertThat(currentListResponse.endOfBillingPeriod())
            .contains(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
        assertThat(currentListResponse.marketplacePayoutsEnabled()).contains(true)
        assertThat(currentListResponse.paymentMethod())
            .contains(
                StripePaymentMethodInfo.builder()
                    .brand("brand")
                    .email("email")
                    .expMonth(0L)
                    .expYear(0L)
                    .last4("last4")
                    .build()
            )
        assertThat(currentListResponse.permissions().getOrNull()).containsExactly("string")
        assertThat(currentListResponse.reachedMaxWorkspaces()).contains(true)
        assertThat(currentListResponse.tier()).contains(PaymentPlanTier.NO_PLAN)
        assertThat(currentListResponse.upcomingPlan())
            .contains(
                CustomerVisiblePlanInfo.builder()
                    .startedOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .tier(PaymentPlanTier.NO_PLAN)
                    .endsOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .build()
            )
        assertThat(currentListResponse.wallet())
            .contains(Wallet.builder().creditBalanceMicros(0L).inflightBalanceMicros(0L).build())
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val currentListResponse =
            CurrentListResponse.builder()
                .config(
                    OrganizationConfig.builder()
                        .allowCustomIframes(true)
                        .arbitraryCostTrackingEnabled(true)
                        .canAddSeats(true)
                        .canDisablePublicSharing(true)
                        .canServeDatasets(true)
                        .canUseAbac(true)
                        .canUseAgentBuilder(true)
                        .canUseBulkExport(true)
                        .canUseLanggraphCloud(true)
                        .canUseRbac(true)
                        .canUseSamlSso(true)
                        .clioEnabled(true)
                        .datadogRumSessionSampleRate(0L)
                        .demoLgpNewGraphEnabled(true)
                        .enableAlignEvaluators(true)
                        .enableIncludeExtendedStats(true)
                        .enableLanggraphPricing(true)
                        .enableLgpListenersPage(true)
                        .enableMarkdownInTracing(true)
                        .enableMonthlyUsageCharts(true)
                        .enableOrgUsageCharts(true)
                        .enablePricingRedesign(true)
                        .enableQueryingV2Endpoints(true)
                        .enableRunTreeStreaming(true)
                        .enableThreadViewPlayground(true)
                        .enableThreadsImprovements(true)
                        .kvDatasetMessageSupport(true)
                        .langgraphDeployOwnCloudEnabled(true)
                        .langgraphEnterpriseEnabled(true)
                        .langgraphRemoteReconcilerEnabled(true)
                        .langsmithAlertsLegacyPocEnabled(true)
                        .langsmithAlertsPocEnabled(true)
                        .langsmithExperimentalSearchEnabled(true)
                        .lgpTemplatesEnabled(true)
                        .maxFreeLanggraphCloudDeployments(0L)
                        .maxIdentities(0L)
                        .maxLanggraphCloudDeployments(0L)
                        .maxPromptWebhooks(0L)
                        .maxThreadEvaluatorsPerTenant(0L)
                        .maxWorkspaces(0L)
                        .newRuleEvaluatorCreationVersion(0L)
                        .partnerPlanApprovalDate("partner_plan_approval_date")
                        .playgroundEvaluatorStrategy("playground_evaluator_strategy")
                        .premierPlanApprovalDate("premier_plan_approval_date")
                        .promptOptimizationJobsEnabled(true)
                        .requireCodeEvaluatorLanguageField(true)
                        .showPlaygroundPromptCanvas(true)
                        .showUpdatedResourceTags(true)
                        .showUpdatedSidenav(true)
                        .startupPlanApprovalDate("startup_plan_approval_date")
                        .tenantSkipTopkFacets(true)
                        .threadEvaluatorsEnabled(true)
                        .useExactSearchForPrompts(true)
                        .usePythonPlaygroundService(true)
                        .build()
                )
                .connectedToMetronome(true)
                .connectedToStripe(true)
                .hasCancelled(true)
                .isPersonal(true)
                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .currentPlan(
                    CustomerVisiblePlanInfo.builder()
                        .startedOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .tier(PaymentPlanTier.NO_PLAN)
                        .endsOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .build()
                )
                .defaultSsoProvision(true)
                .displayName("display_name")
                .endOfBillingPeriod(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                .marketplacePayoutsEnabled(true)
                .paymentMethod(
                    StripePaymentMethodInfo.builder()
                        .brand("brand")
                        .email("email")
                        .expMonth(0L)
                        .expYear(0L)
                        .last4("last4")
                        .build()
                )
                .addPermission("string")
                .reachedMaxWorkspaces(true)
                .tier(PaymentPlanTier.NO_PLAN)
                .upcomingPlan(
                    CustomerVisiblePlanInfo.builder()
                        .startedOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .tier(PaymentPlanTier.NO_PLAN)
                        .endsOn(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .build()
                )
                .wallet(Wallet.builder().creditBalanceMicros(0L).inflightBalanceMicros(0L).build())
                .build()

        val roundtrippedCurrentListResponse =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(currentListResponse),
                jacksonTypeRef<CurrentListResponse>(),
            )

        assertThat(roundtrippedCurrentListResponse).isEqualTo(currentListResponse)
    }
}
