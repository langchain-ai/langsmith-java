// File generated from our OpenAPI spec by Stainless.

package com.langchain.smith.models.orgs.current.info

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.langchain.smith.core.jsonMapper
import com.langchain.smith.models.orgs.PaymentPlanTier
import com.langchain.smith.models.orgs.current.OrganizationConfig
import com.langchain.smith.models.orgs.current.Wallet
import kotlin.jvm.optionals.getOrNull
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class OrganizationInfoTest {

    @Test
    fun create() {
        val organizationInfo =
            OrganizationInfo.builder()
                .config(
                    OrganizationConfig.builder()
                        .allowCustomIframes(true)
                        .arbitraryCostTrackingEnabled(true)
                        .canAddSeats(true)
                        .canDisablePublicSharing(true)
                        .canServeDatasets(true)
                        .canUseAbac(true)
                        .canUseAgentBuilder(true)
                        .canUseBulkExport(true)
                        .canUseLanggraphCloud(true)
                        .canUseRbac(true)
                        .canUseRemoteMcpServers(true)
                        .canUseSamlSso(true)
                        .clioEnabled(true)
                        .datadogRumSessionSampleRate(0L)
                        .demoLgpNewGraphEnabled(true)
                        .enableAlignEvaluators(true)
                        .enableIncludeExtendedStats(true)
                        .enableLanggraphPricing(true)
                        .enableLgpListenersPage(true)
                        .enableMarkdownInTracing(true)
                        .enableMonthlyUsageCharts(true)
                        .enableOrgUsageCharts(true)
                        .enablePricingRedesign(true)
                        .enableQueryingV2Endpoints(true)
                        .enableRunTreeStreaming(true)
                        .enableThreadViewPlayground(true)
                        .enableThreadsImprovements(true)
                        .kvDatasetMessageSupport(true)
                        .langgraphDeployOwnCloudEnabled(true)
                        .langgraphEnterpriseEnabled(true)
                        .langgraphRemoteReconcilerEnabled(true)
                        .langsmithAlertsLegacyPocEnabled(true)
                        .langsmithAlertsPocEnabled(true)
                        .langsmithExperimentalSearchEnabled(true)
                        .lgpTemplatesEnabled(true)
                        .maxFreeLanggraphCloudDeployments(0L)
                        .maxIdentities(0L)
                        .maxLanggraphCloudDeployments(0L)
                        .maxPromptWebhooks(0L)
                        .maxThreadEvaluatorsPerTenant(0L)
                        .maxWorkspaces(0L)
                        .newRuleEvaluatorCreationVersion(0L)
                        .partnerPlanApprovalDate("partner_plan_approval_date")
                        .playgroundEvaluatorStrategy("playground_evaluator_strategy")
                        .premierPlanApprovalDate("premier_plan_approval_date")
                        .promptOptimizationJobsEnabled(true)
                        .requireCodeEvaluatorLanguageField(true)
                        .showPlaygroundPromptCanvas(true)
                        .showUpdatedResourceTags(true)
                        .showUpdatedSidenav(true)
                        .startupPlanApprovalDate("startup_plan_approval_date")
                        .tenantSkipTopkFacets(true)
                        .threadEvaluatorsEnabled(true)
                        .useExactSearchForPrompts(true)
                        .usePythonPlaygroundService(true)
                        .build()
                )
                .isPersonal(true)
                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .defaultSsoProvision(true)
                .disabled(true)
                .displayName("display_name")
                .jitProvisioningEnabled(true)
                .marketplacePayoutsEnabled(true)
                .memberDisabled(true)
                .patCreationDisabled(true)
                .addPermission("string")
                .publicSharingDisabled(true)
                .reachedMaxWorkspaces(true)
                .ssoLoginSlug("sso_login_slug")
                .ssoOnly(true)
                .tier(PaymentPlanTier.NO_PLAN)
                .wallet(Wallet.builder().creditBalanceMicros(0L).inflightBalanceMicros(0L).build())
                .workspaceAdminCanInviteToOrg(true)
                .build()

        assertThat(organizationInfo.config())
            .isEqualTo(
                OrganizationConfig.builder()
                    .allowCustomIframes(true)
                    .arbitraryCostTrackingEnabled(true)
                    .canAddSeats(true)
                    .canDisablePublicSharing(true)
                    .canServeDatasets(true)
                    .canUseAbac(true)
                    .canUseAgentBuilder(true)
                    .canUseBulkExport(true)
                    .canUseLanggraphCloud(true)
                    .canUseRbac(true)
                    .canUseRemoteMcpServers(true)
                    .canUseSamlSso(true)
                    .clioEnabled(true)
                    .datadogRumSessionSampleRate(0L)
                    .demoLgpNewGraphEnabled(true)
                    .enableAlignEvaluators(true)
                    .enableIncludeExtendedStats(true)
                    .enableLanggraphPricing(true)
                    .enableLgpListenersPage(true)
                    .enableMarkdownInTracing(true)
                    .enableMonthlyUsageCharts(true)
                    .enableOrgUsageCharts(true)
                    .enablePricingRedesign(true)
                    .enableQueryingV2Endpoints(true)
                    .enableRunTreeStreaming(true)
                    .enableThreadViewPlayground(true)
                    .enableThreadsImprovements(true)
                    .kvDatasetMessageSupport(true)
                    .langgraphDeployOwnCloudEnabled(true)
                    .langgraphEnterpriseEnabled(true)
                    .langgraphRemoteReconcilerEnabled(true)
                    .langsmithAlertsLegacyPocEnabled(true)
                    .langsmithAlertsPocEnabled(true)
                    .langsmithExperimentalSearchEnabled(true)
                    .lgpTemplatesEnabled(true)
                    .maxFreeLanggraphCloudDeployments(0L)
                    .maxIdentities(0L)
                    .maxLanggraphCloudDeployments(0L)
                    .maxPromptWebhooks(0L)
                    .maxThreadEvaluatorsPerTenant(0L)
                    .maxWorkspaces(0L)
                    .newRuleEvaluatorCreationVersion(0L)
                    .partnerPlanApprovalDate("partner_plan_approval_date")
                    .playgroundEvaluatorStrategy("playground_evaluator_strategy")
                    .premierPlanApprovalDate("premier_plan_approval_date")
                    .promptOptimizationJobsEnabled(true)
                    .requireCodeEvaluatorLanguageField(true)
                    .showPlaygroundPromptCanvas(true)
                    .showUpdatedResourceTags(true)
                    .showUpdatedSidenav(true)
                    .startupPlanApprovalDate("startup_plan_approval_date")
                    .tenantSkipTopkFacets(true)
                    .threadEvaluatorsEnabled(true)
                    .useExactSearchForPrompts(true)
                    .usePythonPlaygroundService(true)
                    .build()
            )
        assertThat(organizationInfo.isPersonal()).isEqualTo(true)
        assertThat(organizationInfo.id()).contains("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
        assertThat(organizationInfo.defaultSsoProvision()).contains(true)
        assertThat(organizationInfo.disabled()).contains(true)
        assertThat(organizationInfo.displayName()).contains("display_name")
        assertThat(organizationInfo.jitProvisioningEnabled()).contains(true)
        assertThat(organizationInfo.marketplacePayoutsEnabled()).contains(true)
        assertThat(organizationInfo.memberDisabled()).contains(true)
        assertThat(organizationInfo.patCreationDisabled()).contains(true)
        assertThat(organizationInfo.permissions().getOrNull()).containsExactly("string")
        assertThat(organizationInfo.publicSharingDisabled()).contains(true)
        assertThat(organizationInfo.reachedMaxWorkspaces()).contains(true)
        assertThat(organizationInfo.ssoLoginSlug()).contains("sso_login_slug")
        assertThat(organizationInfo.ssoOnly()).contains(true)
        assertThat(organizationInfo.tier()).contains(PaymentPlanTier.NO_PLAN)
        assertThat(organizationInfo.wallet())
            .contains(Wallet.builder().creditBalanceMicros(0L).inflightBalanceMicros(0L).build())
        assertThat(organizationInfo.workspaceAdminCanInviteToOrg()).contains(true)
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val organizationInfo =
            OrganizationInfo.builder()
                .config(
                    OrganizationConfig.builder()
                        .allowCustomIframes(true)
                        .arbitraryCostTrackingEnabled(true)
                        .canAddSeats(true)
                        .canDisablePublicSharing(true)
                        .canServeDatasets(true)
                        .canUseAbac(true)
                        .canUseAgentBuilder(true)
                        .canUseBulkExport(true)
                        .canUseLanggraphCloud(true)
                        .canUseRbac(true)
                        .canUseRemoteMcpServers(true)
                        .canUseSamlSso(true)
                        .clioEnabled(true)
                        .datadogRumSessionSampleRate(0L)
                        .demoLgpNewGraphEnabled(true)
                        .enableAlignEvaluators(true)
                        .enableIncludeExtendedStats(true)
                        .enableLanggraphPricing(true)
                        .enableLgpListenersPage(true)
                        .enableMarkdownInTracing(true)
                        .enableMonthlyUsageCharts(true)
                        .enableOrgUsageCharts(true)
                        .enablePricingRedesign(true)
                        .enableQueryingV2Endpoints(true)
                        .enableRunTreeStreaming(true)
                        .enableThreadViewPlayground(true)
                        .enableThreadsImprovements(true)
                        .kvDatasetMessageSupport(true)
                        .langgraphDeployOwnCloudEnabled(true)
                        .langgraphEnterpriseEnabled(true)
                        .langgraphRemoteReconcilerEnabled(true)
                        .langsmithAlertsLegacyPocEnabled(true)
                        .langsmithAlertsPocEnabled(true)
                        .langsmithExperimentalSearchEnabled(true)
                        .lgpTemplatesEnabled(true)
                        .maxFreeLanggraphCloudDeployments(0L)
                        .maxIdentities(0L)
                        .maxLanggraphCloudDeployments(0L)
                        .maxPromptWebhooks(0L)
                        .maxThreadEvaluatorsPerTenant(0L)
                        .maxWorkspaces(0L)
                        .newRuleEvaluatorCreationVersion(0L)
                        .partnerPlanApprovalDate("partner_plan_approval_date")
                        .playgroundEvaluatorStrategy("playground_evaluator_strategy")
                        .premierPlanApprovalDate("premier_plan_approval_date")
                        .promptOptimizationJobsEnabled(true)
                        .requireCodeEvaluatorLanguageField(true)
                        .showPlaygroundPromptCanvas(true)
                        .showUpdatedResourceTags(true)
                        .showUpdatedSidenav(true)
                        .startupPlanApprovalDate("startup_plan_approval_date")
                        .tenantSkipTopkFacets(true)
                        .threadEvaluatorsEnabled(true)
                        .useExactSearchForPrompts(true)
                        .usePythonPlaygroundService(true)
                        .build()
                )
                .isPersonal(true)
                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                .defaultSsoProvision(true)
                .disabled(true)
                .displayName("display_name")
                .jitProvisioningEnabled(true)
                .marketplacePayoutsEnabled(true)
                .memberDisabled(true)
                .patCreationDisabled(true)
                .addPermission("string")
                .publicSharingDisabled(true)
                .reachedMaxWorkspaces(true)
                .ssoLoginSlug("sso_login_slug")
                .ssoOnly(true)
                .tier(PaymentPlanTier.NO_PLAN)
                .wallet(Wallet.builder().creditBalanceMicros(0L).inflightBalanceMicros(0L).build())
                .workspaceAdminCanInviteToOrg(true)
                .build()

        val roundtrippedOrganizationInfo =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(organizationInfo),
                jacksonTypeRef<OrganizationInfo>(),
            )

        assertThat(roundtrippedOrganizationInfo).isEqualTo(organizationInfo)
    }
}
