// File generated from our OpenAPI spec by Stainless.

package com.langchain.smith.models.datasets.group

import com.fasterxml.jackson.module.kotlin.jacksonTypeRef
import com.langchain.smith.core.JsonValue
import com.langchain.smith.core.jsonMapper
import com.langchain.smith.models.datasets.runs.ExampleWithRunsCh
import com.langchain.smith.models.feedback.FeedbackSchema
import java.time.OffsetDateTime
import org.assertj.core.api.Assertions.assertThat
import org.junit.jupiter.api.Test

internal class GroupRunsResponseTest {

    @Test
    fun create() {
        val groupRunsResponse =
            GroupRunsResponse.builder()
                .addGroup(
                    GroupRunsResponse.Group.builder()
                        .exampleCount(0L)
                        .addExample(
                            ExampleWithRunsCh.builder()
                                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .datasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .inputs(
                                    ExampleWithRunsCh.Inputs.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .name("name")
                                .addRun(
                                    ExampleWithRunsCh.Run.builder()
                                        .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .name("name")
                                        .runType(ExampleWithRunsCh.Run.RunType.TOOL)
                                        .sessionId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .status("status")
                                        .traceId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .appPath("app_path")
                                        .completionCost("completion_cost")
                                        .completionTokens(0L)
                                        .dottedOrder("dotted_order")
                                        .endTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                        .error("error")
                                        .addEvent(
                                            ExampleWithRunsCh.Run.Event.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .executionOrder(1L)
                                        .extra(
                                            ExampleWithRunsCh.Run.Extra.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .feedbackStats(
                                            ExampleWithRunsCh.Run.FeedbackStats.builder()
                                                .putAdditionalProperty(
                                                    "foo",
                                                    JsonValue.from(mapOf("foo" to "bar")),
                                                )
                                                .build()
                                        )
                                        .addFeedback(
                                            FeedbackSchema.builder()
                                                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                .key("key")
                                                .comment("comment")
                                                .comparativeExperimentId(
                                                    "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                )
                                                .correction(
                                                    FeedbackSchema.Correction.UnionMember0.builder()
                                                        .putAdditionalProperty(
                                                            "foo",
                                                            JsonValue.from("bar"),
                                                        )
                                                        .build()
                                                )
                                                .createdAt(
                                                    OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                                )
                                                .extra(
                                                    FeedbackSchema.Extra.builder()
                                                        .putAdditionalProperty(
                                                            "foo",
                                                            JsonValue.from("bar"),
                                                        )
                                                        .build()
                                                )
                                                .feedbackGroupId(
                                                    "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                )
                                                .feedbackSource(
                                                    FeedbackSchema.FeedbackSource.builder()
                                                        .lsUserId(
                                                            "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                        )
                                                        .metadata(
                                                            FeedbackSchema.FeedbackSource.Metadata
                                                                .builder()
                                                                .putAdditionalProperty(
                                                                    "foo",
                                                                    JsonValue.from("bar"),
                                                                )
                                                                .build()
                                                        )
                                                        .type("type")
                                                        .userId(
                                                            "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                        )
                                                        .userName("user_name")
                                                        .build()
                                                )
                                                .feedbackThreadId("feedback_thread_id")
                                                .modifiedAt(
                                                    OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                                )
                                                .runId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                .score(0.0)
                                                .sessionId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                .startTime(
                                                    OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                                )
                                                .traceId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                .value(0.0)
                                                .build()
                                        )
                                        .inputs(
                                            ExampleWithRunsCh.Run.Inputs.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .inputsPreview("inputs_preview")
                                        .inputsS3Urls(
                                            ExampleWithRunsCh.Run.InputsS3Urls.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .manifestId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .manifestS3Id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .outputs(
                                            ExampleWithRunsCh.Run.Outputs.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .outputsPreview("outputs_preview")
                                        .outputsS3Urls(
                                            ExampleWithRunsCh.Run.OutputsS3Urls.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .parentRunId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .promptCost("prompt_cost")
                                        .promptTokens(0L)
                                        .referenceExampleId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .s3Urls(
                                            ExampleWithRunsCh.Run.S3Urls.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .serialized(
                                            ExampleWithRunsCh.Run.Serialized.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .startTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                        .addTag("string")
                                        .totalCost("total_cost")
                                        .totalTokens(0L)
                                        .traceMaxStartTime(
                                            OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                        )
                                        .traceMinStartTime(
                                            OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                        )
                                        .build()
                                )
                                .attachmentUrls(
                                    ExampleWithRunsCh.AttachmentUrls.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .metadata(
                                    ExampleWithRunsCh.Metadata.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .modifiedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .outputs(
                                    ExampleWithRunsCh.Outputs.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .sourceRunId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .build()
                        )
                        .filter("filter")
                        .groupKey("string")
                        .addSession(
                            GroupRunsResponse.Group.Session.builder()
                                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .filter("filter")
                                .tenantId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .completionCost("completion_cost")
                                .completionTokens(0L)
                                .defaultDatasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .description("description")
                                .endTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .errorRate(0.0)
                                .exampleCount(0L)
                                .extra(
                                    GroupRunsResponse.Group.Session.Extra.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .feedbackStats(
                                    GroupRunsResponse.Group.Session.FeedbackStats.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .firstTokenP50(0.0)
                                .firstTokenP99(0.0)
                                .lastRunStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .lastRunStartTimeLive(
                                    OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                )
                                .latencyP50(0.0)
                                .latencyP99(0.0)
                                .maxStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .minStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .name("name")
                                .promptCost("prompt_cost")
                                .promptTokens(0L)
                                .referenceDatasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .runCount(0L)
                                .addRunFacet(
                                    GroupRunsResponse.Group.Session.RunFacet.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .sessionFeedbackStats(
                                    GroupRunsResponse.Group.Session.SessionFeedbackStats.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .startTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .streamingRate(0.0)
                                .testRunNumber(0L)
                                .totalCost("total_cost")
                                .totalTokens(0L)
                                .traceTier(GroupRunsResponse.Group.Session.TraceTier.LONGLIVED)
                                .build()
                        )
                        .completionCost("completion_cost")
                        .completionTokens(0L)
                        .count(0L)
                        .errorRate(0.0)
                        .feedbackStats(
                            GroupRunsResponse.Group.FeedbackStats.builder()
                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                .build()
                        )
                        .latencyP50(0.0)
                        .latencyP99(0.0)
                        .maxStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .minStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .promptCost("prompt_cost")
                        .promptTokens(0L)
                        .totalCost("total_cost")
                        .totalTokens(0L)
                        .build()
                )
                .build()

        assertThat(groupRunsResponse.groups())
            .containsExactly(
                GroupRunsResponse.Group.builder()
                    .exampleCount(0L)
                    .addExample(
                        ExampleWithRunsCh.builder()
                            .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                            .datasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                            .inputs(
                                ExampleWithRunsCh.Inputs.builder()
                                    .putAdditionalProperty("foo", JsonValue.from("bar"))
                                    .build()
                            )
                            .name("name")
                            .addRun(
                                ExampleWithRunsCh.Run.builder()
                                    .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .name("name")
                                    .runType(ExampleWithRunsCh.Run.RunType.TOOL)
                                    .sessionId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .status("status")
                                    .traceId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .appPath("app_path")
                                    .completionCost("completion_cost")
                                    .completionTokens(0L)
                                    .dottedOrder("dotted_order")
                                    .endTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                    .error("error")
                                    .addEvent(
                                        ExampleWithRunsCh.Run.Event.builder()
                                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .executionOrder(1L)
                                    .extra(
                                        ExampleWithRunsCh.Run.Extra.builder()
                                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .feedbackStats(
                                        ExampleWithRunsCh.Run.FeedbackStats.builder()
                                            .putAdditionalProperty(
                                                "foo",
                                                JsonValue.from(mapOf("foo" to "bar")),
                                            )
                                            .build()
                                    )
                                    .addFeedback(
                                        FeedbackSchema.builder()
                                            .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                            .key("key")
                                            .comment("comment")
                                            .comparativeExperimentId(
                                                "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                            )
                                            .correction(
                                                FeedbackSchema.Correction.UnionMember0.builder()
                                                    .putAdditionalProperty(
                                                        "foo",
                                                        JsonValue.from("bar"),
                                                    )
                                                    .build()
                                            )
                                            .createdAt(
                                                OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                            )
                                            .extra(
                                                FeedbackSchema.Extra.builder()
                                                    .putAdditionalProperty(
                                                        "foo",
                                                        JsonValue.from("bar"),
                                                    )
                                                    .build()
                                            )
                                            .feedbackGroupId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                            .feedbackSource(
                                                FeedbackSchema.FeedbackSource.builder()
                                                    .lsUserId(
                                                        "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                    )
                                                    .metadata(
                                                        FeedbackSchema.FeedbackSource.Metadata
                                                            .builder()
                                                            .putAdditionalProperty(
                                                                "foo",
                                                                JsonValue.from("bar"),
                                                            )
                                                            .build()
                                                    )
                                                    .type("type")
                                                    .userId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                    .userName("user_name")
                                                    .build()
                                            )
                                            .feedbackThreadId("feedback_thread_id")
                                            .modifiedAt(
                                                OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                            )
                                            .runId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                            .score(0.0)
                                            .sessionId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                            .startTime(
                                                OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                            )
                                            .traceId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                            .value(0.0)
                                            .build()
                                    )
                                    .inputs(
                                        ExampleWithRunsCh.Run.Inputs.builder()
                                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .inputsPreview("inputs_preview")
                                    .inputsS3Urls(
                                        ExampleWithRunsCh.Run.InputsS3Urls.builder()
                                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .manifestId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .manifestS3Id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .outputs(
                                        ExampleWithRunsCh.Run.Outputs.builder()
                                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .outputsPreview("outputs_preview")
                                    .outputsS3Urls(
                                        ExampleWithRunsCh.Run.OutputsS3Urls.builder()
                                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .parentRunId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .promptCost("prompt_cost")
                                    .promptTokens(0L)
                                    .referenceExampleId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                    .s3Urls(
                                        ExampleWithRunsCh.Run.S3Urls.builder()
                                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .serialized(
                                        ExampleWithRunsCh.Run.Serialized.builder()
                                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                                            .build()
                                    )
                                    .startTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                    .addTag("string")
                                    .totalCost("total_cost")
                                    .totalTokens(0L)
                                    .traceMaxStartTime(
                                        OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                    )
                                    .traceMinStartTime(
                                        OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                    )
                                    .build()
                            )
                            .attachmentUrls(
                                ExampleWithRunsCh.AttachmentUrls.builder()
                                    .putAdditionalProperty("foo", JsonValue.from("bar"))
                                    .build()
                            )
                            .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                            .metadata(
                                ExampleWithRunsCh.Metadata.builder()
                                    .putAdditionalProperty("foo", JsonValue.from("bar"))
                                    .build()
                            )
                            .modifiedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                            .outputs(
                                ExampleWithRunsCh.Outputs.builder()
                                    .putAdditionalProperty("foo", JsonValue.from("bar"))
                                    .build()
                            )
                            .sourceRunId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                            .build()
                    )
                    .filter("filter")
                    .groupKey("string")
                    .addSession(
                        GroupRunsResponse.Group.Session.builder()
                            .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                            .filter("filter")
                            .tenantId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                            .completionCost("completion_cost")
                            .completionTokens(0L)
                            .defaultDatasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                            .description("description")
                            .endTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                            .errorRate(0.0)
                            .exampleCount(0L)
                            .extra(
                                GroupRunsResponse.Group.Session.Extra.builder()
                                    .putAdditionalProperty("foo", JsonValue.from("bar"))
                                    .build()
                            )
                            .feedbackStats(
                                GroupRunsResponse.Group.Session.FeedbackStats.builder()
                                    .putAdditionalProperty("foo", JsonValue.from("bar"))
                                    .build()
                            )
                            .firstTokenP50(0.0)
                            .firstTokenP99(0.0)
                            .lastRunStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                            .lastRunStartTimeLive(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                            .latencyP50(0.0)
                            .latencyP99(0.0)
                            .maxStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                            .minStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                            .name("name")
                            .promptCost("prompt_cost")
                            .promptTokens(0L)
                            .referenceDatasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                            .runCount(0L)
                            .addRunFacet(
                                GroupRunsResponse.Group.Session.RunFacet.builder()
                                    .putAdditionalProperty("foo", JsonValue.from("bar"))
                                    .build()
                            )
                            .sessionFeedbackStats(
                                GroupRunsResponse.Group.Session.SessionFeedbackStats.builder()
                                    .putAdditionalProperty("foo", JsonValue.from("bar"))
                                    .build()
                            )
                            .startTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                            .streamingRate(0.0)
                            .testRunNumber(0L)
                            .totalCost("total_cost")
                            .totalTokens(0L)
                            .traceTier(GroupRunsResponse.Group.Session.TraceTier.LONGLIVED)
                            .build()
                    )
                    .completionCost("completion_cost")
                    .completionTokens(0L)
                    .count(0L)
                    .errorRate(0.0)
                    .feedbackStats(
                        GroupRunsResponse.Group.FeedbackStats.builder()
                            .putAdditionalProperty("foo", JsonValue.from("bar"))
                            .build()
                    )
                    .latencyP50(0.0)
                    .latencyP99(0.0)
                    .maxStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .minStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                    .promptCost("prompt_cost")
                    .promptTokens(0L)
                    .totalCost("total_cost")
                    .totalTokens(0L)
                    .build()
            )
    }

    @Test
    fun roundtrip() {
        val jsonMapper = jsonMapper()
        val groupRunsResponse =
            GroupRunsResponse.builder()
                .addGroup(
                    GroupRunsResponse.Group.builder()
                        .exampleCount(0L)
                        .addExample(
                            ExampleWithRunsCh.builder()
                                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .datasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .inputs(
                                    ExampleWithRunsCh.Inputs.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .name("name")
                                .addRun(
                                    ExampleWithRunsCh.Run.builder()
                                        .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .name("name")
                                        .runType(ExampleWithRunsCh.Run.RunType.TOOL)
                                        .sessionId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .status("status")
                                        .traceId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .appPath("app_path")
                                        .completionCost("completion_cost")
                                        .completionTokens(0L)
                                        .dottedOrder("dotted_order")
                                        .endTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                        .error("error")
                                        .addEvent(
                                            ExampleWithRunsCh.Run.Event.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .executionOrder(1L)
                                        .extra(
                                            ExampleWithRunsCh.Run.Extra.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .feedbackStats(
                                            ExampleWithRunsCh.Run.FeedbackStats.builder()
                                                .putAdditionalProperty(
                                                    "foo",
                                                    JsonValue.from(mapOf("foo" to "bar")),
                                                )
                                                .build()
                                        )
                                        .addFeedback(
                                            FeedbackSchema.builder()
                                                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                .key("key")
                                                .comment("comment")
                                                .comparativeExperimentId(
                                                    "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                )
                                                .correction(
                                                    FeedbackSchema.Correction.UnionMember0.builder()
                                                        .putAdditionalProperty(
                                                            "foo",
                                                            JsonValue.from("bar"),
                                                        )
                                                        .build()
                                                )
                                                .createdAt(
                                                    OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                                )
                                                .extra(
                                                    FeedbackSchema.Extra.builder()
                                                        .putAdditionalProperty(
                                                            "foo",
                                                            JsonValue.from("bar"),
                                                        )
                                                        .build()
                                                )
                                                .feedbackGroupId(
                                                    "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                )
                                                .feedbackSource(
                                                    FeedbackSchema.FeedbackSource.builder()
                                                        .lsUserId(
                                                            "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                        )
                                                        .metadata(
                                                            FeedbackSchema.FeedbackSource.Metadata
                                                                .builder()
                                                                .putAdditionalProperty(
                                                                    "foo",
                                                                    JsonValue.from("bar"),
                                                                )
                                                                .build()
                                                        )
                                                        .type("type")
                                                        .userId(
                                                            "182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e"
                                                        )
                                                        .userName("user_name")
                                                        .build()
                                                )
                                                .feedbackThreadId("feedback_thread_id")
                                                .modifiedAt(
                                                    OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                                )
                                                .runId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                .score(0.0)
                                                .sessionId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                .startTime(
                                                    OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                                )
                                                .traceId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                                .value(0.0)
                                                .build()
                                        )
                                        .inputs(
                                            ExampleWithRunsCh.Run.Inputs.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .inputsPreview("inputs_preview")
                                        .inputsS3Urls(
                                            ExampleWithRunsCh.Run.InputsS3Urls.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .manifestId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .manifestS3Id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .outputs(
                                            ExampleWithRunsCh.Run.Outputs.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .outputsPreview("outputs_preview")
                                        .outputsS3Urls(
                                            ExampleWithRunsCh.Run.OutputsS3Urls.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .parentRunId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .promptCost("prompt_cost")
                                        .promptTokens(0L)
                                        .referenceExampleId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                        .s3Urls(
                                            ExampleWithRunsCh.Run.S3Urls.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .serialized(
                                            ExampleWithRunsCh.Run.Serialized.builder()
                                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                                .build()
                                        )
                                        .startTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                        .addTag("string")
                                        .totalCost("total_cost")
                                        .totalTokens(0L)
                                        .traceMaxStartTime(
                                            OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                        )
                                        .traceMinStartTime(
                                            OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                        )
                                        .build()
                                )
                                .attachmentUrls(
                                    ExampleWithRunsCh.AttachmentUrls.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .createdAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .metadata(
                                    ExampleWithRunsCh.Metadata.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .modifiedAt(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .outputs(
                                    ExampleWithRunsCh.Outputs.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .sourceRunId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .build()
                        )
                        .filter("filter")
                        .groupKey("string")
                        .addSession(
                            GroupRunsResponse.Group.Session.builder()
                                .id("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .filter("filter")
                                .tenantId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .completionCost("completion_cost")
                                .completionTokens(0L)
                                .defaultDatasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .description("description")
                                .endTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .errorRate(0.0)
                                .exampleCount(0L)
                                .extra(
                                    GroupRunsResponse.Group.Session.Extra.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .feedbackStats(
                                    GroupRunsResponse.Group.Session.FeedbackStats.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .firstTokenP50(0.0)
                                .firstTokenP99(0.0)
                                .lastRunStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .lastRunStartTimeLive(
                                    OffsetDateTime.parse("2019-12-27T18:11:19.117Z")
                                )
                                .latencyP50(0.0)
                                .latencyP99(0.0)
                                .maxStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .minStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .name("name")
                                .promptCost("prompt_cost")
                                .promptTokens(0L)
                                .referenceDatasetId("182bd5e5-6e1a-4fe4-a799-aa6d9a6ab26e")
                                .runCount(0L)
                                .addRunFacet(
                                    GroupRunsResponse.Group.Session.RunFacet.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .sessionFeedbackStats(
                                    GroupRunsResponse.Group.Session.SessionFeedbackStats.builder()
                                        .putAdditionalProperty("foo", JsonValue.from("bar"))
                                        .build()
                                )
                                .startTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                                .streamingRate(0.0)
                                .testRunNumber(0L)
                                .totalCost("total_cost")
                                .totalTokens(0L)
                                .traceTier(GroupRunsResponse.Group.Session.TraceTier.LONGLIVED)
                                .build()
                        )
                        .completionCost("completion_cost")
                        .completionTokens(0L)
                        .count(0L)
                        .errorRate(0.0)
                        .feedbackStats(
                            GroupRunsResponse.Group.FeedbackStats.builder()
                                .putAdditionalProperty("foo", JsonValue.from("bar"))
                                .build()
                        )
                        .latencyP50(0.0)
                        .latencyP99(0.0)
                        .maxStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .minStartTime(OffsetDateTime.parse("2019-12-27T18:11:19.117Z"))
                        .promptCost("prompt_cost")
                        .promptTokens(0L)
                        .totalCost("total_cost")
                        .totalTokens(0L)
                        .build()
                )
                .build()

        val roundtrippedGroupRunsResponse =
            jsonMapper.readValue(
                jsonMapper.writeValueAsString(groupRunsResponse),
                jacksonTypeRef<GroupRunsResponse>(),
            )

        assertThat(roundtrippedGroupRunsResponse).isEqualTo(groupRunsResponse)
    }
}
